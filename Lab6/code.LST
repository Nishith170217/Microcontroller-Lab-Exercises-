C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 1   


C51 COMPILER V7.50, COMPILATION OF MODULE CODE
OBJECT MODULE PLACED IN code.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE code.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include<reg51.h>
   2          
   3          
   4          #include<absacc.h>
   5          
   6          
   7          typedef unsigned char uchar;
   8          
   9          
  10          typedef unsigned int uint;
  11          
  12          
  13          #define LLCD_CMD_WR PBYTE[0x10]
  14          
  15          
  16          #define LLCD_CMD_RD PBYTE[0x11]
  17          
  18          
  19          #define LLCD_DATA_WR PBYTE[0x12]
  20          
  21          
  22          #define LLCD_DATA_RD PBYTE[0x13]
  23          
  24          
  25          
  26          
  27          
  28          #define RLCD_CMD_WR PBYTE[0x20]
  29          
  30          
  31          #define RLCD_CMD_RD PBYTE[0x21]
  32          
  33          
  34          #define RLCD_DATA_WR PBYTE[0x22]
  35          
  36          
  37          #define RLCD_DATA_RD PBYTE[0x23]
  38          
  39          
  40          sbit busy=P0^1;
  41          
  42          
  43          
  44          
  45          
  46          uchar code hz0[]=
  47          
  48          
  49          {
  50          
  51          
  52          /*--  ??:  ?  --*/
  53          
  54          
  55          /*--  ??12;  ??????????:?x?=16x16   --*/
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 2   

  56          
  57          
  58          0x04,0x24,0x44,0x84,0x64,0x9C,0x40,0x30,0x0F,0xC8,0x08,0x08,0x28,0x18,0x00,0x00,
  59          
  60          
  61          0x10,0x08,0x06,0x01,0x82,0x4C,0x20,0x18,0x06,0x01,0x06,0x18,0x20,0x40,0x80,0x00,
  62          
  63          
  64          
  65          
  66          
  67          /*--  ??:  ?  --*/
  68          
  69          
  70          /*--  ??12;  ??????????:?x?=16x16   --*/
  71          
  72          
  73          0x40,0x40,0x42,0xCC,0x00,0x00,0xFC,0x04,0x02,0x00,0xFC,0x04,0x04,0xFC,0x00,0x00,
  74          
  75          
  76          0x00,0x40,0x20,0x1F,0x20,0x40,0x4F,0x44,0x42,0x40,0x7F,0x42,0x44,0x43,0x40,0x00,
  77          
  78          
  79          
  80          
  81          
  82          /*--  ??:  ?  --*/
  83          
  84          
  85          /*--  ??12;  ??????????:?x?=16x16   --*/
  86          
  87          
  88          0x80,0x60,0xF8,0x07,0x04,0xE4,0x24,0x24,0x24,0xFF,0x24,0x24,0x24,0xE4,0x04,0x00,
  89          
  90          
  91          0x00,0x00,0xFF,0x00,0x80,0x81,0x45,0x29,0x11,0x2F,0x41,0x41,0x81,0x81,0x80,0x00,
  92          
  93          
  94          
  95          
  96          
  97          /*--  ??:  ?  --*/
  98          
  99          
 100          /*--  ??12;  ??????????:?x?=16x16   --*/
 101          
 102          
 103          0x00,0x00,0xFE,0x22,0x22,0x22,0x22,0xFE,0x22,0x22,0x22,0x22,0xFE,0x00,0x00,0x00,
 104          
 105          
 106          0x80,0x60,0x1F,0x02,0x02,0x02,0x02,0x7F,0x02,0x02,0x42,0x82,0x7F,0x00,0x00,0x00,
 107          
 108          
 109          
 110          
 111          
 112          /*--  ??:  ?  --*/
 113          
 114          
 115          /*--  ??12;  ??????????:?x?=16x16   --*/
 116          
 117          
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 3   

 118          0x00,0x00,0xF8,0x49,0x4A,0x4C,0x48,0xF8,0x48,0x4C,0x4A,0x49,0xF8,0x00,0x00,0x00,
 119          
 120          
 121          0x10,0x10,0x13,0x12,0x12,0x12,0x12,0xFF,0x12,0x12,0x12,0x12,0x13,0x10,0x10,0x00,
 122          
 123          
 124          
 125          
 126          
 127          /*--  ??:  ?  --*/
 128          
 129          
 130          /*--  ??12;  ??????????:?x?=16x16   --*/
 131          
 132          
 133          0x00,0x00,0x00,0xFE,0x20,0x20,0x20,0x20,0x20,0x3F,0x20,0x20,0x20,0x20,0x00,0x00,
 134          
 135          
 136          0x00,0x80,0x60,0x1F,0x02,0x02,0x02,0x02,0x02,0x02,0xFE,0x00,0x00,0x00,0x00,0x00,
 137          
 138          
 139          
 140          
 141          
 142          /*--  ??:  ?  --*/
 143          
 144          
 145          /*--  ??12;  ??????????:?x?=16x16   --*/
 146          
 147          
 148          0x10,0x10,0xD0,0xFF,0x90,0x10,0x00,0xFE,0x02,0x02,0x02,0xFE,0x00,0x00,0x00,0x00,
 149          
 150          
 151          0x04,0x03,0x00,0xFF,0x00,0x83,0x60,0x1F,0x00,0x00,0x00,0x3F,0x40,0x40,0x78,0x00,
 152          
 153          
 154          
 155          
 156          
 157          /*--  ??:  ?  --*/
 158          
 159          
 160          /*--  ??12;  ??????????:?x?=16x16   --*/
 161          
 162          
 163          0x00,0x00,0xFE,0x02,0x02,0xF2,0x92,0x9A,0x96,0x92,0x92,0xF2,0x02,0x02,0x02,0x00,
 164          
 165          
 166          0x80,0x60,0x1F,0x40,0x20,0x17,0x44,0x84,0x7C,0x04,0x04,0x17,0x20,0x40,0x00,0x00,
 167          
 168          
 169          };
 170          
 171          
 172          
 173          
 174          
 175          uchar code hz1[]=
 176          
 177          
 178          {
 179          
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 4   

 180          
 181          /*--  ??:  ?  --*/
 182          
 183          
 184          /*--  ??12;  ??????????:?x?=16x16   --*/
 185          
 186          
 187          0x04,0x84,0x84,0xFC,0x84,0x84,0x00,0xFE,0x92,0x92,0xFE,0x92,0x92,0xFE,0x00,0x00,
 188          
 189          
 190          0x20,0x60,0x20,0x1F,0x10,0x10,0x40,0x44,0x44,0x44,0x7F,0x44,0x44,0x44,0x40,0x00,
 191          
 192          
 193          
 194          
 195          
 196          /*--  ??:  ?  --*/
 197          
 198          
 199          /*--  ??12;  ??????????:?x?=16x16   --*/
 200          
 201          
 202          0x00,0x00,0x02,0x02,0xFE,0x42,0x82,0x02,0x42,0x72,0x4E,0x40,0xC0,0x00,0x00,0x00,
 203          
 204          
 205          0x80,0x40,0x30,0x0C,0x83,0x80,0x41,0x46,0x28,0x10,0x28,0x46,0x41,0x80,0x80,0x00,
 206          
 207          
 208          
 209          
 210          
 211          /*--  ??:  ?  --*/
 212          
 213          
 214          /*--  ??12;  ??????????:?x?=16x16   --*/
 215          
 216          
 217          0x00,0x00,0xFC,0x04,0x44,0x84,0x04,0x25,0xC6,0x04,0x04,0x04,0x04,0xE4,0x04,0x00,
 218          
 219          
 220          0x40,0x30,0x0F,0x40,0x40,0x41,0x4E,0x40,0x40,0x63,0x50,0x4C,0x43,0x40,0x40,0x00,
 221          
 222          
 223          
 224          
 225          
 226          /*--  ??:  ?  --*/
 227          
 228          
 229          /*--  ??12;  ??????????:?x?=16x16   --*/
 230          
 231          
 232          0x00,0x00,0xFE,0x22,0x22,0x22,0x22,0xFE,0x22,0x22,0x22,0x22,0xFE,0x00,0x00,0x00,
 233          
 234          
 235          0x80,0x60,0x1F,0x02,0x02,0x02,0x02,0x7F,0x02,0x02,0x42,0x82,0x7F,0x00,0x00,0x00,
 236          
 237          
 238          
 239          
 240          
 241          /*--  ??:  ?  --*/
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 5   

 242          
 243          
 244          /*--  ??12;  ??????????:?x?=16x16   --*/
 245          
 246          
 247          0x10,0x10,0x10,0xFF,0x10,0x90,0x08,0x88,0x88,0x88,0xFF,0x88,0x88,0x88,0x08,0x00,
 248          
 249          
 250          0x04,0x44,0x82,0x7F,0x01,0x80,0x80,0x40,0x43,0x2C,0x10,0x28,0x46,0x81,0x80,0x00,
 251          
 252          
 253          
 254          
 255          
 256          /*--  ??:  ?  --*/
 257          
 258          
 259          /*--  ??12;  ??????????:?x?=16x16   --*/
 260          
 261          
 262          0x00,0x10,0x10,0x10,0x10,0xD0,0x30,0xFF,0x30,0xD0,0x12,0x1C,0x10,0x10,0x00,0x00,
 263          
 264          
 265          0x10,0x08,0x04,0x02,0x01,0x00,0x00,0xFF,0x00,0x00,0x01,0x02,0x04,0x08,0x10,0x00,
 266          
 267          
 268          
 269          
 270          
 271          /*--  ??:  ?  --*/
 272          
 273          
 274          /*--  ??12;  ??????????:?x?=16x16   --*/
 275          
 276          
 277          0x20,0xA4,0xA4,0xA4,0xFF,0xA4,0xB4,0x28,0x84,0x70,0x8F,0x08,0x08,0xF8,0x08,0x00,
 278          
 279          
 280          0x04,0x0A,0x49,0x88,0x7E,0x05,0x04,0x84,0x40,0x20,0x13,0x0C,0x33,0x40,0x80,0x00,
 281          
 282          
 283          
 284          
 285          
 286          /*--  ??:  ?  --*/
 287          
 288          
 289          /*--  ??12;  ??????????:?x?=16x16   --*/
 290          
 291          
 292          0x24,0x24,0xA4,0xFE,0x23,0x22,0x00,0x3E,0x22,0x22,0x22,0x22,0x22,0x3E,0x00,0x00,
 293          
 294          
 295          0x08,0x06,0x01,0xFF,0x01,0x06,0x40,0x49,0x49,0x49,0x7F,0x49,0x49,0x49,0x41,0x00,
 296          
 297          
 298          };
 299          
 300          
 301          
 302          
 303          
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 6   

 304          uchar code hz2[]=
 305          
 306          
 307          {
 308          
 309          
 310          /*--  ??:  ?  --*/
 311          
 312          
 313          /*--  ??12;  ??????????:?x?=16x16   --*/
 314          
 315          
 316          0x08,0x04,0x93,0x92,0x96,0x9A,0x92,0xFA,0x94,0x93,0x92,0x96,0xFA,0x02,0x02,0x00,
 317          
 318          
 319          0x40,0x40,0x47,0x24,0x24,0x14,0x0C,0xFF,0x04,0x04,0x24,0x44,0x24,0x1C,0x00,0x00,
 320          
 321          
 322          
 323          
 324          
 325          /*--  ??:  ?  --*/
 326          
 327          
 328          /*--  ??12;  ??????????:?x?=16x16   --*/
 329          
 330          
 331          0x00,0x00,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x08,0x00,0x00,0x00,
 332          
 333          
 334          0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x10,0x00,
 335          
 336          
 337          
 338          
 339          
 340          /*--  ??:  ?  --*/
 341          
 342          
 343          /*--  ??12;  ??????????:?x?=16x16   --*/
 344          
 345          
 346          0x00,0xFE,0x20,0x20,0x3F,0x20,0x00,0xFC,0x24,0xE4,0x24,0x22,0x23,0xE2,0x00,0x00,
 347          
 348          
 349          0x80,0x7F,0x01,0x01,0xFF,0x80,0x60,0x1F,0x80,0x41,0x26,0x18,0x26,0x41,0x80,0x00,
 350          
 351          
 352          
 353          
 354          
 355          /*--  ??:  ,  --*/
 356          
 357          
 358          /*--  ??12;  ??????????:?x?=16x16   --*/
 359          
 360          
 361          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 362          
 363          
 364          0x00,0x00,0x58,0x38,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 365          
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 7   

 366          
 367          
 368          
 369          
 370          /*--  ??:  ?  --*/
 371          
 372          
 373          /*--  ??12;  ??????????:?x?=16x16   --*/
 374          
 375          
 376          0x40,0x40,0x42,0xCC,0x00,0x00,0x00,0x00,0x00,0xFF,0x40,0x40,0x40,0x40,0x00,0x00,
 377          
 378          
 379          0x00,0x00,0x00,0x3F,0x50,0x48,0x40,0x40,0x40,0x7F,0x40,0x40,0x40,0x40,0x40,0x00,
 380          
 381          
 382          
 383          
 384          
 385          /*--  ??:  ?  --*/
 386          
 387          
 388          /*--  ??12;  ??????????:?x?=16x16   --*/
 389          
 390          
 391          0x20,0x24,0x24,0x24,0xFE,0x23,0x22,0x20,0x20,0xFF,0x20,0x22,0x2C,0xA0,0x20,0x00,
 392          
 393          
 394          0x00,0x08,0x48,0x84,0x7F,0x02,0x41,0x40,0x20,0x13,0x0C,0x14,0x22,0x41,0xF8,0x00,
 395          
 396          
 397          
 398          
 399          
 400          /*--  ??:  ?  --*/
 401          
 402          
 403          /*--  ??12;  ??????????:?x?=16x16   --*/
 404          
 405          
 406          0x00,0x80,0x60,0xF8,0x07,0x00,0xF8,0x01,0x06,0x00,0x04,0x04,0x04,0xFC,0x00,0x00,
 407          
 408          
 409          0x01,0x00,0x00,0xFF,0x00,0x00,0xFF,0x00,0x00,0x00,0x00,0x40,0x80,0x7F,0x00,0x00,
 410          
 411          
 412          
 413          
 414          
 415          /*--  ??:  ?  --*/
 416          
 417          
 418          /*--  ??12;  ??????????:?x?=16x16   --*/
 419          
 420          
 421          0x00,0x00,0x10,0x10,0x10,0xFF,0x10,0x10,0x10,0x10,0xFF,0x10,0x10,0x10,0x00,0x00,
 422          
 423          
 424          0x00,0x04,0x84,0x44,0x24,0x17,0x04,0x04,0x04,0x04,0x17,0x24,0x44,0x84,0x04,0x00,
 425          
 426          
 427          
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 8   

 428          
 429          
 430          
 431          
 432          
 433          };
 434          
 435          
 436          
 437          
 438          
 439          uchar code hz3[]=
 440          
 441          
 442          {
 443          
 444          
 445          /*--  ??:  ?  --*/
 446          
 447          
 448          /*--  ??12;  ??????????:?x?=16x16   --*/
 449          
 450          
 451          0x00,0x00,0xFE,0x02,0x12,0x92,0x92,0x92,0x92,0x92,0x92,0x12,0x02,0xFE,0x00,0x00,
 452          
 453          
 454          0x00,0x00,0xFF,0x00,0x00,0x1F,0x08,0x08,0x08,0x08,0x1F,0x40,0x80,0x7F,0x00,0x00,
 455          
 456          
 457          
 458          
 459          
 460          /*--  ??:  ?  --*/
 461          
 462          
 463          /*--  ??12;  ??????????:?x?=16x16   --*/
 464          
 465          
 466          0x40,0x40,0x42,0xCC,0x00,0x80,0x88,0x88,0xFF,0x88,0x88,0xFF,0x88,0x88,0x80,0x00,
 467          
 468          
 469          0x00,0x40,0x20,0x1F,0x20,0x40,0x50,0x4C,0x43,0x40,0x40,0x5F,0x40,0x40,0x40,0x00,
 470          
 471          
 472          
 473          
 474          
 475          /*--  ??:  ?  --*/
 476          
 477          
 478          /*--  ??12;  ??????????:?x?=16x16   --*/
 479          
 480          
 481          0x40,0x40,0x40,0x7C,0x40,0x40,0x40,0xFF,0x44,0x44,0x44,0x44,0x44,0x40,0x40,0x00,
 482          
 483          
 484          0x80,0x90,0x88,0x46,0x40,0x40,0x20,0x2F,0x10,0x10,0x08,0x04,0x02,0x00,0x00,0x00,
 485          
 486          
 487          
 488          
 489          
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 9   

 490          /*--  ??:  ?  --*/
 491          
 492          
 493          /*--  ??12;  ??????????:?x?=16x16   --*/
 494          
 495          
 496          0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 497          
 498          
 499          0x00,0x00,0x04,0x08,0x18,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 500          
 501          
 502          
 503          
 504          
 505          /*--  ??:  ?  --*/
 506          
 507          
 508          /*--  ??12;  ??????????:?x?=16x16   --*/
 509          
 510          
 511          0x00,0x00,0xF8,0x88,0x88,0x88,0x88,0x08,0x08,0xFF,0x08,0x09,0x0A,0xC8,0x08,0x00,
 512          
 513          
 514          0x80,0x60,0x1F,0x00,0x10,0x20,0x1F,0x80,0x40,0x21,0x16,0x18,0x26,0x41,0xF8,0x00,
 515          
 516          
 517          
 518          
 519          
 520          /*--  ??:  ?  --*/
 521          
 522          
 523          /*--  ??12;  ??????????:?x?=16x16   --*/
 524          
 525          
 526          0x80,0x80,0x80,0x80,0xFF,0x80,0x80,0xA0,0x90,0x88,0x84,0x82,0x80,0x80,0x80,0x00,
 527          
 528          
 529          0x00,0x00,0x00,0x00,0xFF,0x40,0x21,0x12,0x04,0x08,0x10,0x20,0x20,0x40,0x40,0x00,
 530          
 531          
 532          
 533          
 534          
 535          /*--  ??:  !  --*/
 536          
 537          
 538          /*--  ??12;  ??????????:?x?=16x16   --*/
 539          
 540          
 541          0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 542          
 543          
 544          0x00,0x00,0x00,0x33,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 545          
 546          
 547          
 548          
 549          
 550          /*--  ??:  !  --*/
 551          
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 10  

 552          
 553          /*--  ??12;  ??????????:?x?=16x16   --*/
 554          
 555          
 556          0x00,0x00,0x00,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 557          
 558          
 559          0x00,0x00,0x00,0x33,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 560          
 561          
 562          
 563          
 564          
 565          
 566          
 567          
 568          };
 569          
 570          
 571          
 572          
 573          
 574          void lcd_cmd_wr(uchar cmdcode,uchar f);
 575          
 576          
 577          void lcd_data_wr(uchar ldata,uchar f);
 578          
 579          
 580          void chech_busy(uchar f);
 581          
 582          
 583          void lcd_hz_wr(uchar posx,uchar posy,uchar *hz);
 584          
 585          
 586          void lcd_str_wr(uchar row,uchar col,uchar n,uchar *str);
 587          
 588          
 589          void lcd_rol();
 590          
 591          
 592          void lcd_init();
 593          
 594          
 595          void delay(uint n);
 596          
 597          
 598          
 599          
 600          
 601          void main()
 602          
 603          
 604          {
 605   1      
 606   1      
 607   1        while(1)
 608   1      
 609   1      
 610   1        {
 611   2      
 612   2      
 613   2         lcd_init();
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 11  

 614   2      
 615   2      
 616   2         lcd_str_wr(0,0,8,hz0);
 617   2      
 618   2      
 619   2         delay(100);
 620   2      
 621   2      
 622   2         lcd_str_wr(1,0,8,hz1);
 623   2      
 624   2      
 625   2         delay(100);
 626   2      
 627   2      
 628   2         lcd_str_wr(2,0,8,hz0);
 629   2      
 630   2      
 631   2         delay(100);
 632   2      
 633   2      
 634   2         lcd_str_wr(3,0,8,hz1);
 635   2      
 636   2      
 637   2         delay(100);
 638   2      
 639   2      
 640   2         lcd_rol();
 641   2      
 642   2      
 643   2         delay(1000);
 644   2      
 645   2      
 646   2         lcd_rol();
 647   2      
 648   2      
 649   2         delay(1000);
 650   2      
 651   2      
 652   2        }
 653   1      
 654   1      
 655   1      }
 656          
 657          
 658          
 659          
 660          
 661          void lcd_init()
 662          
 663          
 664          {
 665   1      
 666   1      
 667   1        uint i;
 668   1      
 669   1      
 670   1        lcd_cmd_wr(0x3f,0);
 671   1      
 672   1      
 673   1        lcd_cmd_wr(0xc0,0);
 674   1      
 675   1      
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 12  

 676   1        lcd_cmd_wr(0xb8,0);
 677   1      
 678   1      
 679   1        lcd_cmd_wr(0x40,0);
 680   1      
 681   1      
 682   1        lcd_cmd_wr(0x3f,1);
 683   1      
 684   1      
 685   1        lcd_cmd_wr(0xc0,1);
 686   1      
 687   1      
 688   1        lcd_cmd_wr(0xb8,1);
 689   1      
 690   1      
 691   1        lcd_cmd_wr(0x40,1);
 692   1      
 693   1      
 694   1        for(i=0;i<256;i++)
 695   1      
 696   1      
 697   1        {
 698   2      
 699   2      
 700   2          lcd_data_wr(0x00,0);
 701   2      
 702   2      
 703   2              lcd_data_wr(0x00,1);
 704   2      
 705   2      
 706   2        }
 707   1      
 708   1      
 709   1        lcd_cmd_wr(0xb8+4,0);
 710   1      
 711   1      
 712   1        lcd_cmd_wr(0xb8+4,1);
 713   1      
 714   1      
 715   1        for(i=0;i<256;i++)
 716   1      
 717   1      
 718   1        {
 719   2      
 720   2      
 721   2          lcd_data_wr(0x00,0);
 722   2      
 723   2      
 724   2              lcd_data_wr(0x00,1);
 725   2      
 726   2      
 727   2        }
 728   1      
 729   1      
 730   1      }
 731          
 732          
 733          
 734          
 735          
 736          void lcd_cmd_wr(uchar cmdcode,uchar f)
 737          
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 13  

 738          
 739          {
 740   1      
 741   1      
 742   1        chech_busy(f);
 743   1      
 744   1      
 745   1        if(f==0) LLCD_CMD_WR=cmdcode;
 746   1      
 747   1      
 748   1        else RLCD_CMD_WR=cmdcode;
 749   1      
 750   1      
 751   1      }
 752          
 753          
 754          
 755          
 756          
 757          void chech_busy(uchar f)
 758          
 759          
 760          {
 761   1      
 762   1      
 763   1        if(f==0) LLCD_CMD_RD;
 764   1      
 765   1      
 766   1        else RLCD_CMD_RD;
 767   1      
 768   1      
 769   1        while(busy);
 770   1      
 771   1      
 772   1      }
 773          
 774          
 775          
 776          
 777          
 778          void lcd_str_wr(uchar row,uchar col,uchar n,uchar *str)
 779          
 780          
 781          {
 782   1      
 783   1      
 784   1        uchar i;
 785   1      
 786   1      
 787   1        for(i=0;i<n;i++)
 788   1      
 789   1      
 790   1        {
 791   2      
 792   2      
 793   2          lcd_hz_wr(row,col,str+i*32);
 794   2      
 795   2      
 796   2              delay(50);
 797   2      
 798   2      
 799   2              col++;
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 14  

 800   2      
 801   2      
 802   2        }
 803   1      
 804   1      
 805   1      }
 806          
 807          
 808          
 809          
 810          
 811          void lcd_hz_wr(uchar posx,uchar posy,uchar *hz)
 812          
 813          
 814          {
 815   1      
 816   1      
 817   1        uchar i;
 818   1      
 819   1      
 820   1        if(posy<4)
 821   1      
 822   1      
 823   1        {
 824   2      
 825   2      
 826   2          lcd_cmd_wr(0xb8+2*posx,0);
 827   2      
 828   2      
 829   2              lcd_cmd_wr(0x40+16*posy,0);
 830   2      
 831   2      
 832   2              for(i=0;i<16;i++) lcd_data_wr(hz[i],0);
 833   2      
 834   2      
 835   2              lcd_cmd_wr(0xb8+2*posx+1,0);
 836   2      
 837   2      
 838   2              lcd_cmd_wr(0x40+16*posy,0);
 839   2      
 840   2      
 841   2              for(i=16;i<32;i++) lcd_data_wr(hz[i],0);
 842   2      
 843   2      
 844   2        }
 845   1      
 846   1      
 847   1        else
 848   1      
 849   1      
 850   1        {
 851   2      
 852   2      
 853   2          lcd_cmd_wr(0xb8+2*posx,1);
 854   2      
 855   2      
 856   2              lcd_cmd_wr(0x40+16*(posy-4),1);
 857   2      
 858   2      
 859   2              for(i=0;i<16;i++) lcd_data_wr(hz[i],1);
 860   2      
 861   2      
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 15  

 862   2              lcd_cmd_wr(0xb8+2*posx+1,1);
 863   2      
 864   2      
 865   2              lcd_cmd_wr(0x40+16*(posy-4),1);
 866   2      
 867   2      
 868   2              for(i=16;i<32;i++) lcd_data_wr(hz[i],1); 
 869   2      
 870   2      
 871   2        }
 872   1      
 873   1      
 874   1      }
 875          
 876          
 877          
 878          
 879          
 880          void lcd_data_wr(uchar ldata,uchar f)
 881          
 882          
 883          {
 884   1      
 885   1      
 886   1        chech_busy(f);
 887   1      
 888   1      
 889   1        if(f==0) LLCD_DATA_WR=ldata;
 890   1      
 891   1      
 892   1        else RLCD_DATA_WR=ldata;
 893   1      
 894   1      
 895   1      }
 896          
 897          
 898          
 899          
 900          
 901          void lcd_rol()
 902          
 903          
 904          {
 905   1      
 906   1      
 907   1        uchar i;
 908   1      
 909   1      
 910   1        for(i=0;i<64;i++)
 911   1      
 912   1      
 913   1        {
 914   2      
 915   2      
 916   2          lcd_cmd_wr(0xc0+i,0);
 917   2      
 918   2      
 919   2              lcd_cmd_wr(0xc0+i,1);
 920   2      
 921   2      
 922   2              delay(10);
 923   2      
C51 COMPILER V7.50   CODE                                                                  04/01/2021 20:48:25 PAGE 16  

 924   2      
 925   2        }
 926   1      
 927   1      
 928   1      }
 929          
 930          
 931          
 932          
 933          
 934          void delay(uint n)
 935          
 936          
 937          {
 938   1      
 939   1      
 940   1        uint i;
 941   1      
 942   1      
 943   1        for(;n>0;n--)
 944   1      
 945   1      
 946   1                for(i=500;i>0;i--);
 947   1      
 948   1      
 949   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    647    ----
   CONSTANT SIZE    =   1024    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      18
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
